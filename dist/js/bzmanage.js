!function(e){function t(t){for(var n,s,i=t[0],o=t[1],c=t[2],f=0,m=[];f<i.length;f++)s=i[f],l[s]&&m.push(l[s][0]),l[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(u&&u(t);m.length;)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var o=a[i];0!==l[o]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},l={6:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=o;r.push([698,1,0]),a()}({698:function(e,t,a){"use strict";var n=s(a(1)),l=s(a(8)),r=s(a(699));function s(e){return e&&e.__esModule?e:{default:e}}a(724),a(726),l.default.render(n.default.createElement(r.default,null),document.getElementById("app"))},699:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(1),r=b(l),s=a(24),i=b(a(700)),o=b(a(65)),c=b(a(348)),u=b(a(349)),f=b(a(703)),m=b(a(704)),d=b(a(66)),v=b(a(57)),p=b(a(350));function b(e){return e&&e.__esModule?e:{default:e}}a(750);var E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loading:!0,bzInfo:{},bzServiceInfo:{},userEditable:!1,hasWorkOrder:!1},a.params=v.default.getParamsFromUrl(),a.bzId=a.params.bzId,a.allBZUsers=[],a._ownerSelector=void 0,a._managerSelector=void 0,a._memberSelector=void 0,a._userInfoContainerView=void 0,a._handleStartUserEdit=a._handleStartUserEdit.bind(a),a._handleCancelUserEdit=a._handleCancelUserEdit.bind(a),a._handleResetUsers=a._handleResetUsers.bind(a),a._handleSubmitUsers=a._handleSubmitUsers.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),n(t,[{key:"componentDidMount",value:function(){this.getBZInfo()}},{key:"getBZInfo",value:function(){var e=this;this.setState({loading:!0});var t=[];t.push(i.default.getBZInfo(this.bzId)),t.push(i.default.getBZServiceInfo(this.bzId)),t.push(i.default.getAllUsersByBZId(this.bzId)),Promise.all(t).then(function(t){e.allBZUsers=t[2],e.setState({loading:!1,bzInfo:t[0],bzServiceInfo:t[1],hasWorkOrder:!1})}).catch(function(t){console.log(t),e.setState({loading:!1})})}},{key:"_handleStartUserEdit",value:function(){this.setState({userEditable:!0})}},{key:"_handleCancelUserEdit",value:function(){this.setState({userEditable:!1})}},{key:"_handleResetUsers",value:function(){}},{key:"_handleSubmitUsers",value:function(){var e=this,t=this._ownerSelector.getSelected(),a=this._managerSelector.getSelected(),n=this._memberSelector.getSelected();console.log(this.bzId,t,a,n);var l="apply_join_BZ_notif_key";new Promise(function(e,t){10*Math.random()>5?e("12345"):t("mock error")}).then(function(t){s.notification.close(l),s.notification.success({key:l,duration:0,message:r.default.createElement("div",null,"提交成功，工单编号为",r.default.createElement("span",{style:{marginLeft:10,color:"#1890ff"}},t))}),e._userInfoContainerView.setEditState(!1),e.setState({userEditable:!1,hasWorkOrder:!0})}).catch(function(e){console.log(e),s.notification.close(l),s.notification.error({key:l,duration:0,message:r.default.createElement("div",null,"服务器异常，请稍候重试")})})}},{key:"getUserHeaderTips",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript: void(0)",t=void 0;if(this.state.hasWorkOrder)t=r.default.createElement("div",{style:{color:"red"}},r.default.createElement(s.Icon,{type:"info-circle",style:{marginRight:5}}),r.default.createElement("a",{href:e,style:{color:"red"}},"您还有正在进行的工单，请点击查看"));else{var a=r.default.createElement("div",{style:{fontSize:12}},r.default.createElement("div",null,"项目owner：最高操作权限，负责业务内操作工单审批"),r.default.createElement("div",null,"项目管理员：最高操作权限，操作需owner审批"),r.default.createElement("div",null,"开发成员：查看服务信息、处罚中心、规则查看，操作需owner审批"),r.default.createElement("div",null,"运营成员：风险大盘、处罚中心、规则读写，操作需owner审批"),r.default.createElement("div",null,"客服成员：处罚中心、反馈中心，操作需owner审批"));t=r.default.createElement(s.Popover,{className:"role-tips",trigger:"hover",content:a,placement:"right"},r.default.createElement(s.Icon,{type:"info-circle"}))}return t}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.bzInfo,l=t.bzServiceInfo,i=t.userEditable,v=t.hasWorkOrder,b=p.default.MANAGER,E=!(i&&b===p.default.OWNER),w=!(i&&(b===p.default.OWNER||b===p.default.MANAGER)),h=w;return r.default.createElement(o.default,{headerMenuKeys:["ywlb"],sliderMenuKeys:["ywlb"],sliderConfig:d.default.bz},r.default.createElement(s.Spin,{delay:500,spinning:a},r.default.createElement("div",{className:"page-title"},r.default.createElement("h2",{className:"bz-desc"},n.desc),r.default.createElement("a",{className:"bz-back",href:"./business.html"},"<< 返回业务列表")),r.default.createElement("div",null,r.default.createElement(s.Divider,{orientation:"left"})),r.default.createElement(m.default,{dataSource:n}),r.default.createElement(s.Divider,{orientation:"left",style:{marginTop:32}},"业务成员信息"),r.default.createElement(c.default,{ref:function(t){return e._userInfoContainerView=t},headerText:"成员信息",subHeader:this.getUserHeaderTips(),hideEditBtn:v,onStartEdit:this._handleStartUserEdit,onCancelEdit:this._handleCancelUserEdit},r.default.createElement(u.default,{ref:function(t){return e._ownerSelector=t},label:"项目owner",tipInfo:"owner可修改",disabled:E,defaultSelected:[],dataSource:this.allBZUsers}),r.default.createElement(u.default,{ref:function(t){return e._managerSelector=t},label:"项目管理员",tipInfo:"owner和管理员可修改",disabled:w,defaultSelected:[],dataSource:this.allBZUsers}),r.default.createElement(u.default,{ref:function(t){return e._memberSelector=t},label:"项目成员",tipInfo:"owner和管理员可修改",disabled:h,defaultSelected:[],dataSource:this.allBZUsers}),i?r.default.createElement("div",{className:"user-opts-container"},r.default.createElement(s.Button,{className:"user-reset-btn",onClick:this._handleResetUsers},"重置"),r.default.createElement(s.Button,{className:"user-submit-btn",onClick:this._handleSubmitUsers,type:"primary"},"提交申请"),r.default.createElement("div",{className:"user-submit-btn-info"},r.default.createElement(s.Icon,{type:"info-circle",style:{marginRight:5}}),"修改内容需要(项目)审批")):void 0),r.default.createElement(s.Divider,{orientation:"left",style:{marginTop:48}},"服务接入信息"),r.default.createElement(f.default,{dataSource:l})))}}]),t}();t.default=E},700:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(101)),l=s(a(701)),r=s(a(702));function s(e){return e&&e.__esModule?e:{default:e}}var i={getBZGList:function(){var e=this;return n.default.getGroupList().then(function(t){return t.forEach(function(t){t.roleMembers=e._handleRoleUsers(t.members)}),t})},getAllUsers:function(e){return n.default.getAllUsers(e).then(function(e){return e})},_handleRoleUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach(function(e){var a=e.roleId,n=e.userName;t[a]||(t[a]=[]),t[a].push(n)}),t},getBZInfo:function(){return new Promise(function(e){setTimeout(function(){e({bzNum:10004,bzName:"passport_contacts_upload",desc:"passport通讯录上传防范",sence:"上传防护",bzGroup:"passport风控",principal:"zhangwenbin,zhangxuejun",applyTime:1548057119317})},1e3)})},getBZServiceInfo:function(){return new Promise(function(e){setTimeout(function(){e(l.default)},1e3)})},getSelectedUsers:function(){},getAllUsersByBZId:function(){return new Promise(function(e){setTimeout(function(){e(r.default)},1e3)})}};t.default=i},701:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={serviceInfo:{url:"api.magellan.qiyi.domain",method:"HTTP POST",contentType:"x-www-form-urlencoded"},serviceParams:[{params:"biz_name",type:"string",necessary:!0,desc:"业务名称",comment:"passport_login"},{params:"biz_code",type:"string",necessary:!0,desc:"业务标识码",comment:"passport"},{params:"biz_sec",type:"string",necessary:!0,desc:"业务token",comment:"详见申请工单回执"},{params:"version",type:"int",necessary:!1,desc:"策略版本",comment:"选填，默认使用最新规则集"},{params:"params",type:"jsonString",necessary:!0,desc:"原数据入参",comment:"详见业务参数说明"}],bzParams:[{params:"uid",type:"string",necessary:!1,desc:"用户ID",comment:"用户ID"},{params:"ip",type:"string",necessary:!1,desc:"ip",comment:"ip"},{params:"dfp",type:"string",necessary:!1,desc:"dfp",comment:"设备指纹"},{params:"agent_type",type:"int",necessary:!1,desc:"登录端",comment:"登录端"}]}},702:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{userName:"weiliesheng",nikeName:"张三",userId:"12034441",mail:"abc@q.com"},{userName:"lisi",nikeName:"李四",userId:"120344442",mail:"abc@q.com"},{userName:"ouyang",nikeName:"欧阳疯",userId:"120344434",mail:"abc@q.com"},{userName:"zhangsanfeng",nikeName:"张三丰",userId:"120341zz44",mail:"abc@q.com"},{userName:"wangchongyang",nikeName:"王重阳",userId:"wang1221",mail:"abc@q.com"},{userName:"santaizi",nikeName:"龙宫三太子",userId:"san4444",mail:"abc@q.com"},{userName:"xiabingxiejiang",nikeName:"蟹兵蟹将",userId:"12xxx4444",mail:"abc@q.com"}]},703:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(1),r=(n=l)&&n.__esModule?n:{default:n},s=a(24);a(746);var i=r.default.createElement(s.Row,{className:"bz-server-info-view-items"},r.default.createElement(s.Col,{span:4,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},"参数")),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},"类型")),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},"是否必传")),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},"说明")),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},"备注")));t.default=function(e){var t=e.dataSource,a=void 0===t?{}:t,n=a.serviceInfo,l=void 0===n?{}:n,o=a.serviceParams,c=void 0===o?[]:o,u=a.bzParams,f=void 0===u?[]:u;return r.default.createElement("div",{className:"bz-server-info-view-container"},r.default.createElement("div",{className:"bz-server-info-view-title"},"服务信息"),r.default.createElement(s.Row,{className:"bz-server-info-view-items"},r.default.createElement(s.Col,{span:8,className:"bz-server-info-view-item"},r.default.createElement("span",{className:"bz-server-info-view-label"},"线上服务地址："),r.default.createElement("span",{className:"bz-server-info-view-value"},l.url)),r.default.createElement(s.Col,{span:8,className:"bz-server-info-view-item"},r.default.createElement("span",{className:"bz-server-info-view-label"},"Method："),r.default.createElement("span",{className:"bz-server-info-view-value"},l.method)),r.default.createElement(s.Col,{span:8,className:"bz-server-info-view-item"},r.default.createElement("span",{className:"bz-server-info-view-label"},"content-Type："),r.default.createElement("span",{className:"bz-server-info-view-value"},l.contentType))),r.default.createElement("div",{className:"bz-server-info-view-title"},"服务参数"),i,c.map(function(e,t){return r.default.createElement(s.Row,{key:"service-params-"+t,className:"bz-server-info-view-items"},r.default.createElement(s.Col,{span:4,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},e.params)),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},e.type)),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},e.necessary?"是":"否")),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},e.desc)),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},e.comment)))}),r.default.createElement("div",{className:"bz-server-info-view-title"},"业务参数"),i,f.map(function(e,t){return r.default.createElement(s.Row,{key:"bz-params-"+t,className:"bz-server-info-view-items"},r.default.createElement(s.Col,{span:4,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},e.params)),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},e.type)),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},e.necessary?"是":"否")),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},e.desc)),r.default.createElement(s.Col,{span:5,className:"bz-server-info-view-item info-single"},r.default.createElement("span",{className:"bz-server-info-view-label"},e.comment)))}))}},704:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(1)),l=a(24),r=s(a(57));function s(e){return e&&e.__esModule?e:{default:e}}a(748);t.default=function(e){var t=e.className,a=void 0===t?"":t,s=e.dataSource,i=void 0===s?{}:s,o=i.bzNum,c=i.bzName,u=i.desc,f=i.bzGroup,m=i.sence,d=i.applyTime,v=r.default.formattedDate(d);return n.default.createElement("div",{className:"bz-info-view-container "+a},n.default.createElement("div",{className:"bz-info-view-title"},"业务信息"),n.default.createElement(l.Row,{className:"bz-info-view-items"},n.default.createElement(l.Col,{span:8,className:"bz-info-view-item"},n.default.createElement("span",{className:"bz-info-view-label"},"业务编号："),n.default.createElement("span",{className:"bz-info-view-value"},o)),n.default.createElement(l.Col,{span:8,className:"bz-info-view-item"},n.default.createElement("span",{className:"bz-info-view-label"},"业务名称："),n.default.createElement("span",{className:"bz-info-view-value"},c)),n.default.createElement(l.Col,{span:8,className:"bz-info-view-item"},n.default.createElement("span",{className:"bz-info-view-label"},"业务描述："),n.default.createElement("span",{className:"bz-info-view-value"},u))),n.default.createElement(l.Row,{className:"bz-info-view-items"},n.default.createElement(l.Col,{span:8,className:"bz-info-view-item"},n.default.createElement("span",{className:"bz-info-view-label"},"所属业务组："),n.default.createElement("span",{className:"bz-info-view-value"},f)),n.default.createElement(l.Col,{span:8,className:"bz-info-view-item"},n.default.createElement("span",{className:"bz-info-view-label"},"场景："),n.default.createElement("span",{className:"bz-info-view-value"},m)),n.default.createElement(l.Col,{span:8,className:"bz-info-view-item"},n.default.createElement("span",{className:"bz-info-view-label"},"申请时间："),n.default.createElement("span",{className:"bz-info-view-value"},v))))}},746:function(e,t){},748:function(e,t){},750:function(e,t){}});