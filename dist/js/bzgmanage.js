!function(e){function t(t){for(var n,o,i=t[0],s=t[1],u=t[2],f=0,d=[];f<i.length;f++)o=i[f],r[o]&&d.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);d.length;)d.shift()();return l.push.apply(l,u||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(n=!1)}n&&(l.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={4:0},l=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=s;l.push([688,1,0]),a()}({688:function(e,t,a){"use strict";var n=o(a(1)),r=o(a(8)),l=o(a(689));function o(e){return e&&e.__esModule?e:{default:e}}a(724),a(726),r.default.render(n.default.createElement(l.default,null),document.getElementById("app"))},689:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(1),l=b(r),o=a(24),i=b(a(690)),s=b(a(65)),u=b(a(348)),c=b(a(349)),f=b(a(691)),d=b(a(57)),m=b(a(66)),p=b(a(350));function b(e){return e&&e.__esModule?e:{default:e}}a(738);var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={loading:!0,userEditable:!1,hasWorkOrder:!1},a.params=d.default.getParamsFromUrl(),a.bzgId=a.params.bzgId,a.bzgInfo={},a.allBZUsers=[],a._ownerSelector=void 0,a._managerSelector=void 0,a._memberSelector=void 0,a._handleStartUserEdit=a._handleStartUserEdit.bind(a),a._handleCancelUserEdit=a._handleCancelUserEdit.bind(a),a._handleResetUsers=a._handleResetUsers.bind(a),a._handleSubmitUsers=a._handleSubmitUsers.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),n(t,[{key:"componentDidMount",value:function(){this.getBZGInfo()}},{key:"_handleStartUserEdit",value:function(){this.setState({userEditable:!0})}},{key:"_handleCancelUserEdit",value:function(){this.resetSelectedUsers(),this.setState({userEditable:!1})}},{key:"_handleResetUsers",value:function(){this.resetSelectedUsers()}},{key:"resetSelectedUsers",value:function(){var e=this.bzgInfo.roleMembers,t=void 0===e?[]:e;this._ownerSelector.setSelected(t[0]),this._managerSelector.setSelected(t[1]),this._memberSelector.setSelected(t[2])}},{key:"_handleSubmitUsers",value:function(){var e=this,t=this._ownerSelector.getSelected(),a=this._managerSelector.getSelected(),n=this._memberSelector.getSelected();console.log(this.bzgId,t,a,n);var r="apply_join_BZG_notif_key";new Promise(function(e,t){10*Math.random()>5?e("12345"):t("mock error")}).then(function(t){o.notification.close(r),o.notification.success({key:r,duration:0,message:l.default.createElement("div",null,"提交成功，工单编号为",l.default.createElement("span",{style:{marginLeft:10,color:"#1890ff"}},t))}),e._userInfoContainerView.setEditState(!1),e.setState({userEditable:!1,hasWorkOrder:!0})}).catch(function(e){console.log(e),o.notification.close(r),o.notification.error({key:r,duration:0,message:l.default.createElement("div",null,"服务器异常，请稍候重试")})})}},{key:"getBZGInfo",value:function(){var e=this;this.setState({loading:!0});var t=[];t.push(i.default.getBZGInfo(this.bzgId)),t.push(i.default.getAllUsers(this.bzgId)),Promise.all(t).then(function(t){console.log(t),e.allBZUsers=t[1],e.bzgInfo=t[0],e.resetSelectedUsers(),e.setState({loading:!1,hasWorkOrder:!1})}).catch(function(t){console.log(t),e.setState({loading:!1})})}},{key:"getGroupHeaderTips",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript: void(0)",t=void 0;if(this.state.hasWorkOrder)t=l.default.createElement("div",{style:{color:"red"}},l.default.createElement(o.Icon,{type:"info-circle",style:{marginRight:5}}),l.default.createElement("a",{href:e,style:{color:"red"}},"您还有正在进行的工单，请点击查看"));else{var a=l.default.createElement("div",{style:{fontSize:12}},l.default.createElement("div",null,"项目owner：最高操作权限"),l.default.createElement("div",null,"项目管理员：最高操作权限，操作需owner审批"));t=l.default.createElement(o.Popover,{className:"role-tips",trigger:"hover",content:a,placement:"right"},l.default.createElement(o.Icon,{type:"info-circle"}))}return t}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.hasWorkOrder,r=t.userEditable,i=this.bzgInfo,d=i.roleMembers,b=void 0===d?[]:d,v=p.default.MANAGER,g=!(r&&v===p.default.OWNER),h=!(r&&(v===p.default.OWNER||v===p.default.MANAGER)),E=h;return l.default.createElement(s.default,{headerMenuKeys:["ywzlb"],sliderMenuKeys:["ywzlb"],sliderConfig:m.default.bzGroup},l.default.createElement(o.Spin,{delay:500,spinning:a},l.default.createElement("div",{className:"page-title"},l.default.createElement("h2",{className:"bzg-name"},i.groupName),l.default.createElement("a",{className:"bzg-back",href:"./bzgroup.html"},"<< 返回业务组列表")),l.default.createElement("div",null,l.default.createElement(o.Divider,{orientation:"left"})),l.default.createElement(f.default,{dataSource:i}),l.default.createElement(o.Divider,{orientation:"left",style:{marginTop:32}},"业务成员信息"),l.default.createElement(u.default,{ref:function(t){return e._userInfoContainerView=t},headerText:"成员信息",subHeader:this.getGroupHeaderTips(),hideEditBtn:n,onStartEdit:this._handleStartUserEdit,onCancelEdit:this._handleCancelUserEdit},l.default.createElement(c.default,{ref:function(t){return e._ownerSelector=t},label:"owner",tipInfo:"owner可修改",disabled:g,defaultSelected:b[0],dataSource:this.allBZUsers}),l.default.createElement(c.default,{ref:function(t){return e._managerSelector=t},label:"管理员",tipInfo:"owner和管理员可修改",disabled:h,defaultSelected:b[1],dataSource:this.allBZUsers}),l.default.createElement(c.default,{ref:function(t){return e._memberSelector=t},label:"成员",tipInfo:"owner和管理员可修改",disabled:E,defaultSelected:b[2],dataSource:this.allBZUsers}),r?l.default.createElement("div",{className:"group-opts-container"},l.default.createElement(o.Button,{className:"group-reset-btn",onClick:this._handleResetUsers},"重置"),l.default.createElement(o.Button,{className:"group-submit-btn",onClick:this._handleSubmitUsers,type:"primary"},"提交申请"),l.default.createElement("div",{className:"group-submit-btn-info"},l.default.createElement(o.Icon,{type:"info-circle",style:{marginRight:5}}),"修改内容需要(项目)审批")):void 0)))}}]),t}();t.default=v},690:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(101),l=(n=r)&&n.__esModule?n:{default:n};var o={getBZGInfo:function(e){var t=this;return l.default.getGroupInfo(e).then(function(e){return e.roleMembers=t._handleRoleUsers(e.members),e})},getAllUsers:function(e){return l.default.getAllUsers(e).then(function(e){return e})},_handleRoleUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.forEach(function(e){var a=e.roleId,n=e.userName;t[a]||(t[a]=[]),t[a].push(n)}),t}};t.default=o},691:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(1)),r=a(24),l=o(a(57));function o(e){return e&&e.__esModule?e:{default:e}}a(736);t.default=function(e){var t=e.className,a=void 0===t?"":t,o=e.dataSource,i=void 0===o?{}:o,s=i.groupId,u=i.groupEnName,c=i.groupName,f=i.remark,d=i.createTime,m=i.updateTime,p=l.default.formattedDate(d),b=l.default.formattedDate(m);return n.default.createElement("div",{className:"bzg-info-view-container "+a},n.default.createElement("div",{className:"bzg-info-view-title"},"业务组信息"),n.default.createElement(r.Row,{className:"bzg-info-view-items"},n.default.createElement(r.Col,{span:12,className:"bzg-info-view-item"},n.default.createElement("span",{className:"bzg-info-view-label"},"业务组ID："),n.default.createElement("span",{className:"bzg-info-view-value"},s)),n.default.createElement(r.Col,{span:12,className:"bzg-info-view-item"},n.default.createElement("span",{className:"bzg-info-view-label"},"业务组英文名："),n.default.createElement("span",{className:"bzg-info-view-value"},u))),n.default.createElement(r.Row,{className:"bzg-info-view-items"},n.default.createElement(r.Col,{span:12,className:"bzg-info-view-item"},n.default.createElement("span",{className:"bzg-info-view-label"},"业务组名称："),n.default.createElement("span",{className:"bzg-info-view-value"},c)),n.default.createElement(r.Col,{span:12,className:"bzg-info-view-item"},n.default.createElement("span",{className:"bzg-info-view-label"},"业务组描述："),n.default.createElement("span",{className:"bzg-info-view-value"},f))),n.default.createElement(r.Row,{className:"bzg-info-view-items"},n.default.createElement(r.Col,{span:12,className:"bzg-info-view-item"},n.default.createElement("span",{className:"bzg-info-view-label"},"创建时间："),n.default.createElement("span",{className:"bzg-info-view-value"},p)),n.default.createElement(r.Col,{span:12,className:"bzg-info-view-item"},n.default.createElement("span",{className:"bzg-info-view-label"},"最后更新时间："),n.default.createElement("span",{className:"bzg-info-view-value"},b))))}},736:function(e,t){},738:function(e,t){}});